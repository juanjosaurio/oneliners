curl -s "https://www.pcfactory.cl/discos-externos?categoria=422&papa=706" | awk '/class="nombre" itemprop="name"/{match($0, />([^<]*)</, f); product=f[1]; match(product, /([0-9]+[GT]B)/, f);tmpcap=f[1]; if(tmpcap ~ /TB/){factor=1024;}else{factor = 1;} match(tmpcap, /([0-9]+)[GT]B/, f); capacity=f[1]*factor;} /meta itemprop="price"/{match($0, /price" content="([0-9]+)\./, f);price=f[1]; print product";"capacity";"price";"price/capacity;}' | perl -MHTML::Entities -pe 'decode_entities($_);' | iconv -f iso-8859-1 -t utf-8 | sort -r -t ';' -k 4n
